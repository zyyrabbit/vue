<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for components\calendar\dateStore.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">components/calendar/</a> dateStore.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">20.31% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>13/64</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">9.38% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>3/32</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">22.22% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>2/9</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">19.05% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>12/63</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">'use strict';
&nbsp;
Object.defineProperty(exports, "__esModule", {
	value: true
});
&nbsp;
var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');
&nbsp;
var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);
&nbsp;
var _createClass2 = require('babel-runtime/helpers/createClass');
&nbsp;
var _createClass3 = _interopRequireDefault(_createClass2);
&nbsp;
function _interopRequireDefault(obj) { r</span>eturn obj &amp;&amp; obj.__esModule ? obj : <span class="branch-1 cbranch-no" title="branch not covered" >{ default: obj }; }
&nbsp;
var warn = console.warn;
// 日期组件
&nbsp;
var DateStore = function () {
<span class="fstat-no" title="function not covered" >	function DateStore(options) {</span>
<span class="cstat-no" title="statement not covered" >		(</span>0, _classCallCheck3.default)(this, DateStore);
&nbsp;
<span class="cstat-no" title="statement not covered" >		c</span>onsole.log(options);
<span class="cstat-no" title="statement not covered" >		t</span>his.numbers = options.size || 42;
<span class="cstat-no" title="statement not covered" >		t</span>his.currentMonth = options.currentMonth || false;
<span class="cstat-no" title="statement not covered" >		v</span>ar _date = new Date();
<span class="cstat-no" title="statement not covered" >		t</span>his.nowDate = {
			year: _date.getFullYear(), // 年份
			month: _date.getMonth(), // 0-11
			day: _date.getDate() // 1~31
		};
<span class="cstat-no" title="statement not covered" >		this.year = this.nowDate.year; // 年</span>
<span class="cstat-no" title="statement not covered" >		this.month = this.nowDate.month; // 月</span>
<span class="cstat-no" title="statement not covered" >		this.day = this.nowDate.day; // 日</span>
<span class="cstat-no" title="statement not covered" >		this.startInd = 0; // 当月1号在store序号</span>
<span class="cstat-no" title="statement not covered" >		this.endInd = 0; // 当月最后一天在store序号</span>
<span class="cstat-no" title="statement not covered" >		t</span>his.store = [];
<span class="cstat-no" title="statement not covered" >		t</span>his.setToday();
	}
	// 设置日期
&nbsp;
&nbsp;
	(0, _createClass3.default)(DateStore, [{
		key: 'setDate',
		value: <span class="fstat-no" title="function not covered" >function setDate(year, month) {</span>
			// 检测参数是否输入正确
<span class="cstat-no" title="statement not covered" >			if (this._checkYear(year) || this._checkMonth(month)) {</span>
<span class="cstat-no" title="statement not covered" >				r</span>eturn;
			}
<span class="cstat-no" title="statement not covered" >			t</span>his.year = year;
<span class="cstat-no" title="statement not covered" >			t</span>his.month = month;
<span class="cstat-no" title="statement not covered" >			this.store = []; // 重新赋值</span>
<span class="cstat-no" title="statement not covered" >			var start = new Date(year, month, 1).getDay(); // 当月第一天是星期几</span>
<span class="cstat-no" title="statement not covered" >			var currentMaxDays = new Date(year, month + 1, 0).getDate(); // 当月的最后一天</span>
<span class="cstat-no" title="statement not covered" >			var preMaxDays = new Date(year, month, 0).getDate(); // 上个月最后一天</span>
			// 判断是否只当月
<span class="cstat-no" title="statement not covered" >			if (this.currentMonth) {</span>
<span class="cstat-no" title="statement not covered" >				p</span>reMaxDays = undefined;
			}
&nbsp;
<span class="cstat-no" title="statement not covered" >			while (start-- &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >				t</span>his.store.unshift(preMaxDays &amp;&amp; preMaxDays--);
			}
<span class="cstat-no" title="statement not covered" >			t</span>his.startInd = this.store.length;
			// 当月的日期
<span class="cstat-no" title="statement not covered" >			for (var i = 1; i &lt;= currentMaxDays; i++) {</span>
<span class="cstat-no" title="statement not covered" >				t</span>his.store.push(i);
			}
<span class="cstat-no" title="statement not covered" >			t</span>his.endInd = this.store.length - 1;
			// 判断是否只当月
<span class="cstat-no" title="statement not covered" >			if (!this.currentMonth) {</span>
				// 下个月的日期
<span class="cstat-no" title="statement not covered" >				v</span>ar len = this.store.length;
<span class="cstat-no" title="statement not covered" >				v</span>ar _i = 1;
<span class="cstat-no" title="statement not covered" >				while (len++ &lt; this.numbers) {</span>
<span class="cstat-no" title="statement not covered" >					t</span>his.store.push(_i++);
				}
			}
		}
	}, {
		key: '_checkYear',
		value: <span class="fstat-no" title="function not covered" >function _checkYear(year) {</span>
<span class="cstat-no" title="statement not covered" >			if (typeof year !== 'number' || year &lt; 1970 || year &gt; 2300) {</span>
<span class="cstat-no" title="statement not covered" >				w</span>arn('wrong input year arg!');
<span class="cstat-no" title="statement not covered" >				r</span>eturn true;
			}
<span class="cstat-no" title="statement not covered" >			r</span>eturn false;
		}
	}, {
		key: '_checkMonth',
		value: <span class="fstat-no" title="function not covered" >function _checkMonth(month) {</span>
<span class="cstat-no" title="statement not covered" >			if (typeof month !== 'number' || month &lt; 0 || month &gt; 11) {</span>
<span class="cstat-no" title="statement not covered" >				w</span>arn('wrong input month arg!');
<span class="cstat-no" title="statement not covered" >				r</span>eturn true;
			}
<span class="cstat-no" title="statement not covered" >			r</span>eturn false;
		}
		// 设置年份
&nbsp;
	}, {
		key: 'setYear',
		value: <span class="fstat-no" title="function not covered" >function setYear(year) {</span>
<span class="cstat-no" title="statement not covered" >			if (this._checkYear(year)) {</span>
<span class="cstat-no" title="statement not covered" >				r</span>eturn;
			}
<span class="cstat-no" title="statement not covered" >			t</span>his.year = year;
<span class="cstat-no" title="statement not covered" >			t</span>his.setDate(year, this.month);
		}
		// 设置月份
&nbsp;
	}, {
		key: 'setMonth',
		value: <span class="fstat-no" title="function not covered" >function setMonth(month) {</span>
<span class="cstat-no" title="statement not covered" >			if (this._checkMonth(month)) {</span>
<span class="cstat-no" title="statement not covered" >				r</span>eturn;
			}
<span class="cstat-no" title="statement not covered" >			t</span>his.month = month;
<span class="cstat-no" title="statement not covered" >			t</span>his.setDate(this.year, month);
		}
		// 设置为今天的日期
&nbsp;
	}, {
		key: 'setToday',
		value: <span class="fstat-no" title="function not covered" >function setToday() {</span>
<span class="cstat-no" title="statement not covered" >			t</span>his.setDate(this.nowDate.year, this.nowDate.month);
		}
	}]);
	return DateStore;
}();
&nbsp;
exports.default = DateStore;
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Wed Sep 26 2018 19:01:33 GMT+0800 (中国标准时间)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
